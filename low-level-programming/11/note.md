# 11 メモリ
## 11.1 なぜポインタがひつようなのか?
フォン・ノイマンの計算モデルをもつC言語において、プログラムの実行は基本的にデータを操作するコマンドのシーケンスであり
そのデータはアドレッシング可能なメモリに置かれる。データをアドレッシングできるというその声質のおかげで、Cでは洗練されて効率の良い
データ操作が可能になっている。(ただし良いことばかりではなく、バグの温床になることもしばしば)

ポインタが必要な理由は、アドレスを格納し操作するためだ。


## 11.1.2 ポインタ演算
ポインタに対して追込なるのは下記の演算だけである

- 整数の加算または原産をする(負の数も使える)
- それ自体のアドレスを獲る
- デリファレンス
  - 与えられたポイントが指すアドレスを先頭とするメモリからデータを取り出す演算
  - *演算子
- 比較
  - 2つのポインタを比較できる
  - その両方が同じメモリブロック内を指しているときに限られる(同じ配列内の別々の要素など)
  - それ意外は未定義動作
- もう1つのポインタを差し引く
  - 2つのポインタが同じメモリブロック内を指しているときに限るが、小さい方の値を持つポインタをより大きい方の値をもつポインタから引けば、その間の要素数が得られる。



## 11.2 メモリ領域
- code
  - マシン語の命令を格納
- data
  - 通常のグローバス変数
- constant data
  - 文字列リテラルや、constとつけられたグローバル変数など、書き換え不可能なあ定数データ
  - 通常OSによって保護される(仮想メモリの機構によって、メモリの読み書きが許可/禁止される)
- heap
  - malloc用
- stack
  - すべてのローカル変数、リターンアドレス、その他ユーティリティ情報
  - もしプログラムが復数スレッドで実行されたらそれぞれが独自のスタックを持つ

## 11.2.1 メモリ割り当て
以下の3種類がある

- 自動的なメモリ割り当て
- 動的なメモリ割り当て
  - malloc
  - calloc


## 11.6 データストリーム
ファイルをLinuxのシステムコールのレベルで扱う方法(復習)
- openシステムコールでファイルをOPENし、そのディスクリプタ(整数番号)を返す
- writeとread => 書き込みとy9読み込み
- close => ファイルを閉じる

Cのデータストリームは以下の2つに分かれる
- バイナリストリーム
  - 生のバイト
- テキストストリーム
  - 文字で構成され行に分割される


